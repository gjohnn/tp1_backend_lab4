<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="format-detection" content="telephone=no"/>
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <title>HOME</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">

    <!-- Links -->
    <link rel="stylesheet" href="css/camera.css">
    <link rel="stylesheet" href="css/search.css">
    <link rel="stylesheet" href="css/google-map.css">


    <!--JS-->
    <script src="js/jquery.js"></script>
    <script src="js/jquery-migrate-1.2.1.min.js"></script>
    <script src="js/rd-smoothscroll.min.js"></script>

    <!--JS Que Linkea Empresas y Noticias-->
    <script src="jsPropio/datosEmpresa.js"></script>
    <script src="jsPropio/buscarNoticias.js"></script>
    <script src="jsPropio/datosNoticias.js"></script>
    <!--JS Que Linkea Empresas y Noticias-->


    <!--[if lt IE 9]>
    <div style=' clear: both; text-align:center; position: relative;'>
        <a href="http://windows.microsoft.com/en-US/internet-explorer/..">
            <img src="images/ie8-panel/warning_bar_0000_us.jpg" border="0" height="42" width="820"
                 alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today."/>
        </a>
    </div>
    <script src="js/html5shiv.js"></script>
    <![endif]-->
    <script src='js/device.min.js'></script>
  </head>
  <body>
  <div class="page">
  <!--========================================================
                            HEADER
  =========================================================-->
    <header>  
      <div class="container top-sect">
        <div class="navbar-header">
          <h1 class="navbar-brand">
            <!--Esto me hizo poner para denominacion-->
            <a data-type='rd-navbar-brand' href="./"><small id="denominacion"></small></a>
            <!--Esto me hizo poner para denominacion-->
          </h1>
          <a class="search-form_toggle" href="#"></a>
        </div>

        <div class="help-box text-right">
          <p>Telefono</p>
          <!--Esto me hizo poner para Telefono-->
          <a href="callto:#" id="telefono"></a>
          <!--Esto me hizo poner para Telefono-->
          <!--Esto me hizo poner para Horario-->
          <small><span>Horario:</span> <span id="horario"></span></small>
          <!--Esto me hizo poner para Horario-->
        </div>
      </div>
     
	  <div id="stuck_container" class="stuck_container">
        <div class="container">   
			<nav class="navbar navbar-default navbar-static-top pull-left">            
				<div class="">  
				  <ul class="nav navbar-nav sf-menu sf-js-enabled sf-arrows" data-type="navbar">
					<li style="list-style: none;" class="active">
					  <a href="home.html">INICIO</a>
					</li>
					<li style="list-style: none;">
					  <a href="./index.html">LISTA EMPRESAS</a>
					</li>
				  </ul>                           
				</div>
			</nav>
			<form class="search-form" id="searchForm" action="buscador.html" method="GET" accept-charset="utf-8">
			  <label class="search-form_label">
				<input class="search-form_input" type="text" name="buscar" id="searchInput" autocomplete="off" placeholder="Ingrese Texto"/>
				<span class="search-form_liveout"></span>
			  </label>
			  <button class="search-form_submit fa-search" type="submit"></button>
			</form>
             
        </div>

      </div>  

    </header>

  <!--========================================================
                            CONTENT
  =========================================================-->

    <main>        

      <section class="well well1 well1_ins1">
        <div class="camera_container">
            <div id="camera" class="camera_wrap">
                <!-- Primer Slide -->
                <div id="slide1" data-src="images/page-1_slide1.jpg">
                    <div class="camera_caption fadeIn">
                        <div class="jumbotron jumbotron1">
                            <em>
                                <a id="noticia1-link" href="#"></a>
                            </em>
                            <div class="wrap">
                                <p id="noticia1-resumen"></p>
                                <a id="noticia1-link-btn" href="#" class="btn-link fa-angle-right"></a>
                            </div>  
                        </div>
                    </div>
                </div>
    
                <!-- Segundo Slide -->
                <div id="slide2" data-src="images/page-1_slide2.jpg">
                    <div class="camera_caption fadeIn">
                        <div class="jumbotron jumbotron2">
                            <em>
                                <a id="noticia2-link" href="#"></a>
                            </em>
                            <div class="wrap">
                                <p id="noticia2-resumen"></p>
                                <a id="noticia2-link-btn" href="#" class="btn-link hov_prime fa-angle-right"></a>
                            </div>  
                        </div>
                    </div>
                </div>
    
                <!-- Tercer Slide -->
                <div id="slide3" data-src="images/page-1_slide3.jpg">
                    <div class="camera_caption fadeIn">
                        <div class="jumbotron">
                            <em>
                                <a id="noticia3-link" href="#"></a>
                            </em>
                            <div class="wrap">
                                <p id="noticia3-resumen"></p>
                                <a id="noticia3-link-btn" href="#" class="btn-link fa-angle-right"></a>
                            </div>  
                        </div>
                    </div>
                </div>
    
            </div>
        </div>
    </section>
    
      
      <section class="well well2 wow fadeIn  bg1" data-wow-duration='3s'>
        <div class="container">
        <h2 class="txt-pr">
        Quienes Somos
        </h2>
          <div class="row">
            <div class="col">
              <!--Esto me hizo ponerlo para el QuienesSomos--> 
              <p id="quienesSomos" style="text-align:justify"></p>
              <!--Esto me hizo ponerlo para el QuienesSomos-->               
            </div>
          </div>
        </div>
      </section>

    </main>

    <!--========================================================
                            FOOTER
  =========================================================-->
  <footer class="top-border">
	<section class="well well2 wow fadeIn  bg1" data-wow-duration='3s'>
        <div class="container">
        <h2 class="txt-pr">
        Donde estamos
        </h2>
        </div>
    </section>
    <div class="map">
      <iframe id="mapa" width="1600" height="400" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
    </div>
  

    <section class="well1">
      <div class="container"> 
        <!--Esto me hizo ponerlo para Denominacion Footer ¿?-->         
        <p class="rights">
          <span id="footerDenominacion"></span>  &#169; <span id="copyright-year"></span>
          <a href="index-5.html">Privacy Policy</a>
        </p>
        <!--Esto me hizo ponerlo para Denominacion Footer ¿?-->         
      </div> 
    </section>    
  </footer>
  </div>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!-- Include all compiled plugins (below), or include individual files as needed -->         
    <script src="js/bootstrap.min.js"></script>
    <script src="js/tm-scripts.js"></script>    
  <!-- </script> -->


  </body>

  <script>
    // Suponiendo que tienes el id de la empresa ya disponible
    const params = new URLSearchParams(window.location.search);
    const idEmpresa= params.get("id");
  
    // Llamada a la API para obtener las últimas noticias
    fetch(`http://localhost:8080/api/noticias/${idEmpresa}/ultimas`)
      .then(response => response.json())
      .then(data => {
        if (data.length >= 3) {
          // Reemplazar los valores del slider con las noticias obtenidas
          document.getElementById("noticia1-link").textContent = data[0].titulo;
          document.getElementById("noticia1-resumen").textContent = data[0].resumen;
          document.getElementById("noticia1-link").href = `detalle.html?id=${data[0].id}`;
          document.getElementById("slide1").setAttribute('data-src', data[0].imagen);
  
          document.getElementById("noticia2-link").textContent = data[1].titulo;
          document.getElementById("noticia2-resumen").textContent = data[1].resumen;
          document.getElementById("noticia2-link").href = `detalle.html?id=${data[1].id}`;
          document.getElementById("slide2").setAttribute('data-src', data[1].imagen);
  
          document.getElementById("noticia3-link").textContent = data[2].titulo;
          document.getElementById("noticia3-resumen").textContent = data[2].resumen;
          document.getElementById("noticia3-link").href = `detalle.html?id=${data[2].id}`;
          document.getElementById("slide3").setAttribute('data-src', data[2].imagen);
        } else {
          console.log("No hay suficientes noticias para mostrar.");
        }
      })
      .catch(error => console.error('Error al obtener las noticias:', error));
  </script>
  

  
</html>
